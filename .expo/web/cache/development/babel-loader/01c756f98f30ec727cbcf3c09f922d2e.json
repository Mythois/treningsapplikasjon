{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { WorkoutUser } from \"./Users/WorkoutUser\";\nimport { auth, db } from \"../firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport UsersCollectionLoader from \"./Users/UserCollectionLoader\";\nexport var LocalData = function () {\n  function LocalData() {\n    _classCallCheck(this, LocalData);\n  }\n  _createClass(LocalData, null, [{\n    key: \"initCurrentUser\",\n    value: function () {\n      var _initCurrentUser = _asyncToGenerator(function* () {\n        var _this = this;\n        console.log(\"Init curr user\");\n        var cu = auth.currentUser;\n        if (cu) {\n          var userRef = doc(db, \"users\", cu.uid);\n          yield getDoc(userRef).then(function (snap) {\n            console.log(snap.data());\n            _this.currentUser = new WorkoutUser(snap.data());\n          }).catch(function (error) {\n            return console.log(error.message);\n          });\n        }\n      });\n      function initCurrentUser() {\n        return _initCurrentUser.apply(this, arguments);\n      }\n      return initCurrentUser;\n    }()\n  }]);\n  return LocalData;\n}();\nLocalData.currentUser = new WorkoutUser({});\nLocalData.usersCollection = new UsersCollectionLoader();","map":{"version":3,"names":["WorkoutUser","auth","db","doc","getDoc","UsersCollectionLoader","LocalData","console","log","cu","currentUser","userRef","uid","then","snap","data","catch","error","message","usersCollection"],"sources":["C:/Users/tommy/OneDrive/Documents/school/softwareDevelopment/treningsapplikasjon/LocalData/LocalData.ts"],"sourcesContent":["import { WorkoutUser } from \"./Users/WorkoutUser\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport UsersCollectionLoader from \"./Users/UserCollectionLoader\";\r\n\r\nexport class LocalData {\r\n  /**\r\n   * The WorkoutUser instance of the user currently signed in to the application\r\n   */\r\n  static currentUser: WorkoutUser = new WorkoutUser({});\r\n  \r\n  /**\r\n   * A CollectionLoader to load the instances of users in the app.\r\n   */\r\n  static usersCollection: UsersCollectionLoader = new UsersCollectionLoader();\r\n    \r\n  static async initCurrentUser() {\r\n    console.log(\"Init curr user\");\r\n    \r\n    const cu = auth.currentUser;\r\n    if (cu) {\r\n      const userRef = doc(db, \"users\", cu.uid);\r\n      await getDoc(userRef)\r\n      .then((snap) => {\r\n        console.log(snap.data());\r\n        this.currentUser = new WorkoutUser(snap.data());\r\n      })\r\n      .catch(error => console.log(error.message));\r\n    }\r\n  }\r\n}"],"mappings":";;;AAAA,SAASA,WAAW;AACpB,SAASC,IAAI,EAAEC,EAAE;AACjB,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,OAAOC,qBAAqB;AAE5B,WAAaC,SAAS;EAAA;IAAA;EAAA;EAAA;IAAA;IAAA;MAAA,yCAWpB,aAA+B;QAAA;QAC7BC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QAE7B,IAAMC,EAAE,GAAGR,IAAI,CAACS,WAAW;QAC3B,IAAID,EAAE,EAAE;UACN,IAAME,OAAO,GAAGR,GAAG,CAACD,EAAE,EAAE,OAAO,EAAEO,EAAE,CAACG,GAAG,CAAC;UACxC,MAAMR,MAAM,CAACO,OAAO,CAAC,CACpBE,IAAI,CAAC,UAACC,IAAI,EAAK;YACdP,OAAO,CAACC,GAAG,CAACM,IAAI,CAACC,IAAI,EAAE,CAAC;YACxB,KAAI,CAACL,WAAW,GAAG,IAAIV,WAAW,CAACc,IAAI,CAACC,IAAI,EAAE,CAAC;UACjD,CAAC,CAAC,CACDC,KAAK,CAAC,UAAAC,KAAK;YAAA,OAAIV,OAAO,CAACC,GAAG,CAACS,KAAK,CAACC,OAAO,CAAC;UAAA,EAAC;QAC7C;MACF,CAAC;MAAA;QAAA;MAAA;MAAA;IAAA;EAAA;EAAA;AAAA;AAxBUZ,SAAS,CAIbI,WAAW,GAAgB,IAAIV,WAAW,CAAC,CAAC,CAAC,CAAC;AAJ1CM,SAAS,CASba,eAAe,GAA0B,IAAId,qBAAqB,EAAE"},"metadata":{},"sourceType":"module"}