{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect } from \"react\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from \"../firebase\";\nimport { LocalData } from \"../LocalData/LocalData\";\nexport function useAuth() {\n  var _React$useState = React.useState(),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    user = _React$useState2[0],\n    setUser = _React$useState2[1];\n  useEffect(function () {\n    var unsubscribeFromAuthStateChanged = onAuthStateChanged(auth, function () {\n      var _ref = _asyncToGenerator(function* (user) {\n        if (user) {\n          setUser(user);\n          yield LocalData.initCurrentUser();\n        } else {\n          setUser(undefined);\n          yield LocalData.initCurrentUser();\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    return unsubscribeFromAuthStateChanged;\n  }, []);\n  return {\n    user: user\n  };\n}","map":{"version":3,"names":["React","useEffect","onAuthStateChanged","auth","LocalData","useAuth","useState","user","setUser","unsubscribeFromAuthStateChanged","initCurrentUser","undefined"],"sources":["C:/Users/tommy/OneDrive/Documents/school/softwareDevelopment/treningsapplikasjon/hooks/useAuth.ts"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { onAuthStateChanged, User } from \"firebase/auth\";\r\nimport { auth } from \"../firebase\";\r\nimport { LocalData } from \"../LocalData/LocalData\";\r\n\r\n/**\r\n * Checks the auth for the application -> check whether a user\r\n * is signed in.\r\n * @returns an auth user instance, if a user is signed in.\r\n */\r\nexport function useAuth() {\r\n    const [user, setUser] = React.useState<User>();\r\n\r\n    useEffect(() => {\r\n        const unsubscribeFromAuthStateChanged = onAuthStateChanged(auth, async (user) => {\r\n            if (user) {\r\n                // User is signed in\r\n                setUser(user);\r\n                await LocalData.initCurrentUser();\r\n            } else {\r\n                // User is signed out\r\n                setUser(undefined);\r\n                await LocalData.initCurrentUser();\r\n            }\r\n        })\r\n        return unsubscribeFromAuthStateChanged; \r\n    }, []);\r\n\r\n    return {\r\n        user\r\n    };\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,kBAAkB,QAAc,eAAe;AACxD,SAASC,IAAI;AACb,SAASC,SAAS;AAOlB,OAAO,SAASC,OAAO,GAAG;EACtB,sBAAwBL,KAAK,CAACM,QAAQ,EAAQ;IAAA;IAAvCC,IAAI;IAAEC,OAAO;EAEpBP,SAAS,CAAC,YAAM;IACZ,IAAMQ,+BAA+B,GAAGP,kBAAkB,CAACC,IAAI;MAAA,6BAAE,WAAOI,IAAI,EAAK;QAC7E,IAAIA,IAAI,EAAE;UAENC,OAAO,CAACD,IAAI,CAAC;UACb,MAAMH,SAAS,CAACM,eAAe,EAAE;QACrC,CAAC,MAAM;UAEHF,OAAO,CAACG,SAAS,CAAC;UAClB,MAAMP,SAAS,CAACM,eAAe,EAAE;QACrC;MACJ,CAAC;MAAA;QAAA;MAAA;IAAA,IAAC;IACF,OAAOD,+BAA+B;EAC1C,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACHF,IAAI,EAAJA;EACJ,CAAC;AACL"},"metadata":{},"sourceType":"module"}