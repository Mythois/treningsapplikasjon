{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport FeedsListItem from \"./FeedsListItem\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Feeds = [{\n  id: Math.random(),\n  userID: 'you',\n  name: 'New workout program',\n  date: new Date(),\n  likedBy: ['dsfs', 'sdfjsf', '83724', '3423']\n}];\nvar defaultFilters = {\n  typeOfFeed: 'All',\n  isImage: false\n};\nfunction FeedsContainer(props, ref) {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    itemsState = _useState2[0],\n    setItems = _useState2[1];\n  useEffect(function () {\n    _refresh();\n  }, []);\n  var _useState3 = useState(defaultFilters),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loadFilters = _useState4[0],\n    setFilters = _useState4[1];\n  function _refresh() {\n    setItems([]);\n    for (var i = 0; i < 10; i++) {\n      loadNewItems();\n    }\n    alert('refreshed');\n  }\n  function loadNewItems() {\n    setItems(function (currentItems) {\n      return [].concat(_toConsumableArray(currentItems), [Feeds[0]]);\n    });\n  }\n  function isCloseToBottom(_ref) {\n    var contentOffset = _ref.contentOffset,\n      contentSize = _ref.contentSize,\n      layoutMeasurement = _ref.layoutMeasurement;\n    return layoutMeasurement.height + contentOffset.y >= contentSize.height - 1000;\n  }\n  useImperativeHandle(ref, function () {\n    return {\n      refresh: function refresh() {\n        _refresh();\n      }\n    };\n  });\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(ScrollView, {\n      onScroll: function onScroll(_ref2) {\n        var nativeEvent = _ref2.nativeEvent;\n        if (isCloseToBottom(nativeEvent)) {\n          loadNewItems();\n        }\n      },\n      children: _jsx(FlatList, {\n        style: styles.list,\n        data: itemsState,\n        numColumns: 2,\n        renderItem: function renderItem(_ref3) {\n          var item = _ref3.item;\n          return _jsx(FeedsListItem, {\n            name: item.name,\n            text: 'This text contains the content of the program',\n            likedBy: item.likedBy.length\n          });\n        }\n      })\n    })\n  });\n}\n;\nexport default forwardRef(FeedsContainer);\nvar windowHeight = Dimensions.get('window').height;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: 'rgb(12, 12, 12)',\n    height: windowHeight - 80 - 20\n  },\n  list: {\n    position: 'relative'\n  }\n});","map":{"version":3,"names":["forwardRef","useEffect","useImperativeHandle","useState","FeedsListItem","Feeds","id","Math","random","userID","name","date","Date","likedBy","defaultFilters","typeOfFeed","isImage","FeedsContainer","props","ref","itemsState","setItems","refresh","loadFilters","setFilters","i","loadNewItems","alert","currentItems","isCloseToBottom","contentOffset","contentSize","layoutMeasurement","height","y","styles","container","nativeEvent","list","item","length","windowHeight","Dimensions","get","StyleSheet","create","backgroundColor","position"],"sources":["C:/Users/tommy/OneDrive/Documents/school/softwareDevelopment/treningsapplikasjon/screens/mainNavScreens/feeds/FeedsContainer.tsx"],"sourcesContent":["import { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, ScrollView, Dimensions } from 'react-native';\r\nimport FeedsListItem from './FeedsListItem';\r\n\r\n// Placeholder for feeds\r\nconst Feeds = [\r\n    {\r\n        id: Math.random(),\r\n        userID: 'you',\r\n        name: 'New workout program',\r\n        date: new Date(),\r\n        likedBy: ['dsfs', 'sdfjsf', '83724', '3423'],\r\n    },\r\n];\r\n\r\ninterface Filters {\r\n    typeOfFeed: String,\r\n    isImage: boolean,\r\n}\r\n\r\nconst defaultFilters: Filters = { typeOfFeed: 'All', isImage: false }\r\n\r\n\r\nfunction FeedsContainer(props, ref) {\r\n\r\n    // Contains the current items\r\n    const [itemsState, setItems] = useState([]);\r\n    useEffect(() => {\r\n        refresh();\r\n    }, []);\r\n\r\n    // Managing what to load\r\n    const [loadFilters, setFilters] = useState(defaultFilters);\r\n\r\n    // Refreshes all items in the item list\r\n    function refresh() {\r\n        setItems([]);\r\n        for (var i = 0; i < 10; i++) {\r\n            loadNewItems();\r\n        }\r\n        alert('refreshed');\r\n    }\r\n\r\n    // Fetch new feed from database without deleting the existing ones        <---------------- Must make a better load function\r\n    function loadNewItems() {\r\n        setItems(currentItems => [...currentItems, Feeds[0]]);\r\n\r\n        // If nothing is returned, then tell the user that there are no more feeds\r\n    }\r\n\r\n    function isCloseToBottom({ contentOffset, contentSize, layoutMeasurement }) {\r\n        return layoutMeasurement.height + contentOffset.y >= contentSize.height - 1000;\r\n    }\r\n\r\n    // Allow the parent to call refresh\r\n    useImperativeHandle(ref, () => ({\r\n        refresh: () => { refresh() }\r\n    }));\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <ScrollView onScroll={({ nativeEvent }) => { if (isCloseToBottom(nativeEvent)) { loadNewItems() } }}>\r\n                <FlatList style={styles.list} data={itemsState} numColumns={2} renderItem={({ item }) => (\r\n                    <FeedsListItem name={item.name} text={'This text contains the content of the program'} likedBy={item.likedBy.length}></FeedsListItem>\r\n                )} />\r\n            </ScrollView>\r\n        </View>\r\n    )\r\n};\r\n\r\nexport default forwardRef(FeedsContainer);\r\n\r\nconst windowHeight = Dimensions.get('window').height;\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        backgroundColor: 'rgb(12, 12, 12)',\r\n        height: windowHeight - 80 - 20,\r\n    },\r\n    list: {\r\n        position: 'relative',\r\n    },\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}